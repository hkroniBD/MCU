# Complete Microcontroller-Based System Design Lecture
## Md. Hassanul Karim Roni | Assistant Professor | EEE | HSTU

---

## ğŸ“š Course Overview

This comprehensive lecture covers microcontroller system design from absolute basics to practical applications. We'll use Arduino as our primary learning platform because it's beginner-friendly, widely available, and teaches real engineering concepts.

**What You'll Learn:**
- Microcontroller fundamentals
- Arduino hardware and programming
- Input/Output interfacing
- Sensors and actuators
- Communication protocols
- Real-world project design
- Debugging and troubleshooting

---

## Module 1: Introduction to Microcontrollers

### 1.1 What is a Microcontroller?

**Simple Definition**: A microcontroller is a tiny computer on a single chip designed to control electronic devices.

**Real-World Analogy**: 
- Your laptop = General-purpose computer (can do anything)
- Microcontroller = Specialized tool (designed for specific tasks)

Think of it like this: A laptop is like a full workshop with every tool imaginable. A microcontroller is like a specialized multi-tool designed perfectly for specific jobs.

### 1.2 Microcontroller vs Microprocessor

| Feature | Microprocessor (CPU) | Microcontroller (MCU) |
|---------|---------------------|----------------------|
| **What is it?** | Just the brain | Complete system on chip |
| **Memory** | External RAM & storage | Built-in RAM & Flash |
| **Peripherals** | Needs external chips | Built-in (GPIO, ADC, timers) |
| **Cost** | Expensive | Cheap ($1-$10) |
| **Power** | High consumption | Very low power |
| **Example** | Intel i7, AMD Ryzen | Arduino, ESP32, STM32 |
| **Application** | Computers, phones | Appliances, robots, IoT |

### 1.3 Inside a Microcontroller

Every microcontroller contains:

**1. CPU (Central Processing Unit)**
- The brain that executes instructions
- Performs calculations and makes decisions
- Clock speed: 1 MHz to 100+ MHz

**2. Memory**
- **Flash/ROM**: Stores your program permanently (like a hard drive)
- **RAM**: Temporary storage while running (like short-term memory)
- **EEPROM**: Stores data even when powered off

**3. Input/Output Pins (GPIO)**
- Digital pins: HIGH (5V/3.3V) or LOW (0V)
- Analog pins: Read varying voltages (0-5V)
- PWM pins: Simulate analog output

**4. Peripherals**
- **Timers**: Keep track of time, create delays
- **ADC**: Converts analog signals to digital (reading sensors)
- **UART/SPI/I2C**: Communication with other devices
- **Interrupts**: Respond immediately to events

**Visual Breakdown**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       MICROCONTROLLER CHIP          â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ CPU â”‚â”€â”€â”‚ RAM  â”‚â”€â”€â”‚  Flash   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â”‚ (Program)â”‚  â”‚
â”‚     â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚     â”‚                              â”‚
â”‚  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Peripheral Bus          â”‚    â”‚
â”‚  â””â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”˜    â”‚
â”‚     â”‚    â”‚    â”‚    â”‚    â”‚         â”‚
â”‚  â”Œâ”€â”€â–¼â”€â” â”Œâ–¼â”€â”€â”â”Œâ–¼â”€â”€â”â”Œâ–¼â”€â”€â”â”Œâ–¼â”€â”€â”€â”   â”‚
â”‚  â”‚GPIOâ”‚â”‚ADCâ”‚â”‚TMRâ”‚â”‚UARTâ”‚â”‚SPIâ”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜   â”‚
â”‚     â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ (Connect to outside world)
   Pins/Legs
```

### 1.4 Why Learn Microcontrollers?

**Career Opportunities**:
- Embedded Systems Engineer
- IoT Developer
- Robotics Engineer
- Automotive Electronics
- Medical Devices
- Smart Home Technology

**Skills You'll Gain**:
- Hardware-software integration
- Real-time programming
- Problem-solving
- Electronics understanding
- Project development

---

## Module 2: Meet Arduino - Your First Microcontroller

### 2.1 What is Arduino?

Arduino is both:
1. **Hardware**: Easy-to-use development boards
2. **Software**: Beginner-friendly programming environment
3. **Community**: Millions of makers sharing projects

**Why Arduino for Learning?**
- âœ… No complex setup required
- âœ… Plug-and-play USB programming
- âœ… Huge community support
- âœ… Thousands of tutorials and libraries
- âœ… Affordable ($5-$30)
- âœ… Professional yet beginner-friendly

### 2.2 Arduino Uno - The Perfect Starting Point

**Technical Specifications**:
- **Microcontroller**: ATmega328P (8-bit AVR)
- **Operating Voltage**: 5V
- **Clock Speed**: 16 MHz
- **Flash Memory**: 32 KB (program storage)
- **SRAM**: 2 KB (runtime memory)
- **EEPROM**: 1 KB (permanent data storage)
- **Digital I/O Pins**: 14 (6 with PWM)
- **Analog Input Pins**: 6 (10-bit ADC)

**Board Layout**:
```
                    Arduino Uno
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
    â”‚  â”‚ ATmega328P   â”‚     RESET BUTTON â”‚
    â”‚  â”‚  (Main MCU)  â”‚          â—       â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
    â”‚                                    â”‚
    â”‚  Power Pins:          Digital I/O: â”‚
    â”‚  â— IOREF              Pin 0  (RX) â—â”‚
    â”‚  â— RESET              Pin 1  (TX) â—â”‚
    â”‚  â— 3.3V               Pin 2       â—â”‚
    â”‚  â— 5V                 ...         â—â”‚
    â”‚  â— GND                Pin 13 (LED)â—â”‚
    â”‚  â— GND                             â”‚
    â”‚  â— VIN                Analog In:   â”‚
    â”‚                       A0          â—â”‚
    â”‚  USB                  A1          â—â”‚
    â”‚  Connection           ...         â—â”‚
    â”‚  â”Œâ”€â”€â”                 A5          â—â”‚
    â”‚  â””â”€â”€â”˜                              â”‚
    â”‚                    DC Power Jack   â”‚
    â”‚                         â—‹          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Understanding the Pins**:

1. **Power Pins**:
   - `5V`: Provides 5V output (max 500mA)
   - `3.3V`: Provides 3.3V output (max 50mA)
   - `GND`: Ground (0V reference) - multiple pins available
   - `VIN`: Input power (7-12V) when not using USB

2. **Digital Pins (0-13)**:
   - Can be INPUT or OUTPUT
   - `HIGH` = 5V, `LOW` = 0V
   - Pins 3, 5, 6, 9, 10, 11 support PWM (~)
   - Max current: 20mA per pin

3. **Analog Pins (A0-A5)**:
   - Read voltages from 0-5V
   - 10-bit resolution (0-1023 values)
   - Can also be used as digital pins

4. **Special Pins**:
   - `Pin 13`: Built-in LED (perfect for testing!)
   - `Pins 0, 1`: Serial communication (RX, TX)
   - `Pins 2, 3`: External interrupts

### 2.3 Setting Up Arduino IDE

**Step-by-Step Installation**:

1. **Download**: Visit arduino.cc/software
2. **Install**: Run installer for your OS (Windows/Mac/Linux)
3. **Connect Board**: Use USB cable
4. **Select Board**: Tools â†’ Board â†’ Arduino Uno
5. **Select Port**: Tools â†’ Port â†’ (Your Arduino's COM port)

**IDE Overview**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File  Edit  Sketch  Tools  Help          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ“ Verify    â†’ Upload    ğŸ” Serial       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  void setup() {                          â”‚
â”‚    // Runs once at startup               â”‚
â”‚  }                                       â”‚
â”‚                                          â”‚
â”‚  void loop() {                           â”‚
â”‚    // Runs forever                       â”‚
â”‚  }                                       â”‚
â”‚                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status messages appear here...           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 Your First Program: Blink!

**The "Hello World" of Microcontrollers**

```cpp
// Blink the built-in LED on and off

void setup() {
  // Initialize pin 13 as an output
  pinMode(13, OUTPUT);
}

void loop() {
  digitalWrite(13, HIGH);   // Turn LED on (5V)
  delay(1000);              // Wait 1 second (1000 ms)
  digitalWrite(13, LOW);    // Turn LED off (0V)
  delay(1000);              // Wait 1 second
}
```

**Understanding the Code**:

- `void setup()`: Runs ONCE when Arduino powers up
- `void loop()`: Runs FOREVER in a continuous loop
- `pinMode(pin, mode)`: Configure pin as INPUT or OUTPUT
- `digitalWrite(pin, value)`: Set pin HIGH (on) or LOW (off)
- `delay(milliseconds)`: Pause execution

**What Happens Inside**:
```
Power On
    â†“
setup() runs once
    â†“
â”Œâ”€â”€â†’ loop() starts
â”‚       â†“
â”‚   LED ON (digitalWrite HIGH)
â”‚       â†“
â”‚   Wait 1 second (delay)
â”‚       â†“
â”‚   LED OFF (digitalWrite LOW)
â”‚       â†“
â”‚   Wait 1 second
â”‚       â†“
â””â”€â”€â”€loop() repeats forever
```

**ğŸ”§ Try This**: Change `delay(1000)` to `delay(100)`. What happens? The LED blinks 10Ã— faster!

### 2.5 Understanding Arduino Programming

**Arduino Language = Simplified C++**

**Basic Structure**:
```cpp
// Comments explain your code (ignored by compiler)

/* Multi-line
   comments */

// Variable declarations
int myVariable = 10;

void setup() {
  // Initialization code
}

void loop() {
  // Main program
}
```

**Data Types**:
```cpp
// Integers (whole numbers)
int temperature = 25;        // -32,768 to 32,767
unsigned int count = 1000;   // 0 to 65,535
long bigNumber = 1000000;    // Larger range

// Decimals (floating point)
float voltage = 3.14;        // Decimal numbers
double precise = 3.14159265; // More precision

// True/False
bool isOn = true;            // true or false
boolean ledState = HIGH;     // HIGH or LOW

// Characters and text
char letter = 'A';           // Single character
String message = "Hello!";   // Text string

// Special
byte data = 255;             // 0 to 255
```

**Operators**:
```cpp
// Math
int a = 10 + 5;      // Addition (15)
int b = 10 - 5;      // Subtraction (5)
int c = 10 * 5;      // Multiplication (50)
int d = 10 / 5;      // Division (2)
int e = 10 % 3;      // Modulo/Remainder (1)

// Comparison
if (a == b)  // Equal to
if (a != b)  // Not equal
if (a > b)   // Greater than
if (a < b)   // Less than
if (a >= b)  // Greater or equal
if (a <= b)  // Less or equal

// Logic
if (a && b)  // AND (both must be true)
if (a || b)  // OR (at least one true)
if (!a)      // NOT (opposite)
```

**Control Structures**:
```cpp
// IF statement
if (temperature > 30) {
  // It's hot
} else if (temperature > 20) {
  // It's warm
} else {
  // It's cold
}

// FOR loop (repeat specific times)
for (int i = 0; i < 10; i++) {
  // Runs 10 times (i = 0 to 9)
}

// WHILE loop (repeat while condition true)
while (button == HIGH) {
  // Runs while button pressed
}

// SWITCH statement
switch (mode) {
  case 1:
    // Mode 1 code
    break;
  case 2:
    // Mode 2 code
    break;
  default:
    // Default code
    break;
}
```

---

## Module 3: Digital Input and Output

### 3.1 Understanding Digital Signals

**Digital = Binary = Two States Only**

- `HIGH` = 5V = 1 = ON = TRUE
- `LOW` = 0V = 0 = OFF = FALSE

**Real-World Examples**:
- Light switch (on/off)
- Door sensor (open/closed)
- Button (pressed/not pressed)

### 3.2 Digital Output - Controlling LEDs

**Basic LED Circuit**:
```
Arduino Pin 13 â”€â”€â”¬â”€â”€[220Î© Resistor]â”€â”€[LED]â”€â”€â”¬â”€â”€ GND
                 â”‚                            â”‚
              (Anode +)                  (Cathode -)
```

**Why We Need a Resistor**:
- LEDs need ~20mA current
- Without resistor: Too much current â†’ LED burns out!
- Resistor calculation: R = (5V - 2V) / 0.02A = 150Î©
- Use 220Î© or 330Î© for safety margin

**Code Example - Multiple LEDs**:
```cpp
// Traffic Light Simulator
int redLED = 13;
int yellowLED = 12;
int greenLED = 11;

void setup() {
  pinMode(redLED, OUTPUT);
  pinMode(yellowLED, OUTPUT);
  pinMode(greenLED, OUTPUT);
}

void loop() {
  // Red light
  digitalWrite(redLED, HIGH);
  digitalWrite(yellowLED, LOW);
  digitalWrite(greenLED, LOW);
  delay(5000); // 5 seconds
  
  // Yellow light
  digitalWrite(redLED, LOW);
  digitalWrite(yellowLED, HIGH);
  delay(2000); // 2 seconds
  
  // Green light
  digitalWrite(yellowLED, LOW);
  digitalWrite(greenLED, HIGH);
  delay(5000);
}
```

### 3.3 Digital Input - Reading Buttons

**Push Button Circuit**:
```
         5V
          â”‚
         [R] 10kÎ© (pull-up resistor)
          â”‚
          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Arduino Pin 2
          â”‚
       [Button]
          â”‚
         GND
```

**Why Pull-up Resistor?**
- Without it, pin "floats" when button not pressed
- Floating = random noise = unpredictable readings
- Pull-up ensures pin reads HIGH when button open
- When pressed: pin connects to GND = reads LOW

**Code Example - Button Input**:
```cpp
// Control LED with button
int buttonPin = 2;
int ledPin = 13;

void setup() {
  pinMode(buttonPin, INPUT);
  pinMode(ledPin, OUTPUT);
}

void loop() {
  int buttonState = digitalRead(buttonPin);
  
  if (buttonState == LOW) {  // Button pressed (pulled to GND)
    digitalWrite(ledPin, HIGH);  // LED on
  } else {
    digitalWrite(ledPin, LOW);   // LED off
  }
}
```

**Using Internal Pull-up (Easier!)**:
```cpp
void setup() {
  pinMode(buttonPin, INPUT_PULLUP);  // Enables internal pull-up
  pinMode(ledPin, OUTPUT);
}

// Now button circuit is simpler:
// Button between pin and GND only (no external resistor needed)
```

### 3.4 Debouncing - Dealing with Real Buttons

**The Problem**: Mechanical buttons bounce!
```
Button Press:
Expected:  ____â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”____
Actual:    ____â”Œâ”â”Œâ”â”Œâ”€â”€â”€â”€â”€â”€â”€â”____
               (Multiple signals from single press!)
```

**Software Debouncing**:
```cpp
int buttonPin = 2;
int ledPin = 13;
int ledState = LOW;
int lastButtonState = HIGH;
unsigned long lastDebounceTime = 0;
unsigned long debounceDelay = 50;  // 50ms

void setup() {
  pinMode(buttonPin, INPUT_PULLUP);
  pinMode(ledPin, OUTPUT);
}

void loop() {
  int reading = digitalRead(buttonPin);
  
  // If button changed (due to noise or actual press)
  if (reading != lastButtonState) {
    lastDebounceTime = millis();  // Reset timer
  }
  
  // If stable for debounceDelay time
  if ((millis() - lastDebounceTime) > debounceDelay) {
    // Button state has settled
    if (reading == LOW) {  // Button pressed
      ledState = !ledState;  // Toggle LED
      digitalWrite(ledPin, ledState);
    }
  }
  
  lastButtonState = reading;
}
```

### 3.5 PWM - Simulating Analog Output

**What is PWM (Pulse Width Modulation)?**

PWM rapidly switches a pin between HIGH and LOW to simulate intermediate voltages.

**Duty Cycle**:
```
0% (Always LOW)     = 0V average
25% Duty Cycle      = 1.25V average  â–â–â–â–ˆâ–â–â–â–ˆâ–â–â–â–ˆ
50% Duty Cycle      = 2.5V average   â–â–â–ˆâ–ˆâ–â–â–ˆâ–ˆâ–â–â–ˆâ–ˆ
75% Duty Cycle      = 3.75V average  â–â–ˆâ–ˆâ–ˆâ–â–ˆâ–ˆâ–ˆâ–â–ˆâ–ˆâ–ˆ
100% (Always HIGH)  = 5V average     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
```

**Applications**:
- LED brightness control
- Motor speed control
- Servo motor positioning
- Audio generation

**Code Example - LED Fading**:
```cpp
int ledPin = 9;  // Must be PWM pin (marked with ~)

void setup() {
  pinMode(ledPin, OUTPUT);
}

void loop() {
  // Fade in (0 to 255)
  for (int brightness = 0; brightness <= 255; brightness++) {
    analogWrite(ledPin, brightness);
    delay(10);
  }
  
  // Fade out (255 to 0)
  for (int brightness = 255; brightness >= 0; brightness--) {
    analogWrite(ledPin, brightness);
    delay(10);
  }
}
```

**Understanding `analogWrite()`**:
- Range: 0 to 255
- `0` = 0% duty cycle = Always off
- `127` = 50% duty cycle = Half brightness
- `255` = 100% duty cycle = Full brightness
- Frequency: ~490 Hz (fast enough for human eye)

---

## Module 4: Analog Input - Reading the Real World

### 4.1 Understanding Analog Signals

**Digital vs Analog**:
- **Digital**: Only 2 values (0V or 5V)
- **Analog**: Any voltage between 0V and 5V

**Real-World Analog Signals**:
- Temperature (varies continuously)
- Light intensity
- Sound volume
- Position/distance
- Pressure

### 4.2 ADC - Analog to Digital Converter

**How ADC Works**:
```
Analog World        ADC          Digital World
                  â”Œâ”€â”€â”€â”€â”€â”
Temperature  â”€â”€â†’  â”‚     â”‚  â”€â”€â†’   Number (0-1023)
Light        â”€â”€â†’  â”‚ ADC â”‚  â”€â”€â†’   Computer readable
Sound        â”€â”€â†’  â”‚     â”‚  â”€â”€â†’   Can be processed
                  â””â”€â”€â”€â”€â”€â”˜
```

**Arduino ADC Specifications**:
- **Resolution**: 10-bit (2^10 = 1024 values)
- **Input Range**: 0V to 5V
- **Output**: Integer from 0 to 1023
- **Conversion Time**: ~100 microseconds

**Voltage to Value Mapping**:
```
0V    â†’  0
1.25V â†’  255   (5V / 4)
2.5V  â†’  511   (5V / 2)
3.75V â†’  767   (5V * 3/4)
5V    â†’  1023
```

**Formula**: `ADC Value = (Voltage / 5.0) Ã— 1023`

### 4.3 Reading a Potentiometer

**Potentiometer**: Variable resistor (like a volume knob)

**Circuit**:
```
        5V
         â”‚
         â”‚
      [  Pot  ]
         â”‚   â”‚
         â”‚   â””â”€â”€â”€â”€â”€â”€ Arduino A0 (Wiper)
         â”‚
        GND
```

**Code**:
```cpp
int potPin = A0;
int ledPin = 9;

void setup() {
  pinMode(ledPin, OUTPUT);
  Serial.begin(9600);  // Start serial communication
}

void loop() {
  int sensorValue = analogRead(potPin);  // Read 0-1023
  
  // Method 1: Direct mapping for LED brightness
  int brightness = map(sensorValue, 0, 1023, 0, 255);
  analogWrite(ledPin, brightness);
  
  // Method 2: Convert to voltage
  float voltage = sensorValue * (5.0 / 1023.0);
  
  // Display on Serial Monitor
  Serial.print("Raw Value: ");
  Serial.print(sensorValue);
  Serial.print(" | Voltage: ");
  Serial.print(voltage);
  Serial.println("V");
  
  delay(100);  // Read 10 times per second
}
```

**Understanding `map()` Function**:
```cpp
// Scales value from one range to another
// map(value, fromLow, fromHigh, toLow, toHigh)

int mapped = map(512, 0, 1023, 0, 255);
// Input: 512 (halfway in 0-1023)
// Output: 127 (halfway in 0-255)
```

### 4.4 Temperature Sensing with TMP36

**TMP36 Temperature Sensor**:
- Output voltage proportional to temperature
- 10 mV per Â°C
- 0Â°C = 500mV, 25Â°C = 750mV

**Circuit**:
```
TMP36 Sensor
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    â”Œâ”€â”  â”‚
â”‚  â”Œâ”€â”´â”€â”´â”€â”â”‚
â”‚  â”‚     â”‚â”‚
â”‚  â””â”€â”¬â”€â”¬â”€â”˜â”‚
â”‚    â”‚ â”‚ â”‚ â”‚
â””â”€â”€â”€â”€â”¼â”€â”¼â”€â”¼â”€â”˜
     â”‚ â”‚ â”‚
    5Vâ”‚ â”‚GND
      A0
```

**Code**:
```cpp
int tempPin = A0;

void setup() {
  Serial.begin(9600);
}

void loop() {
  // Read sensor
  int reading = analogRead(tempPin);
  
  // Convert to voltage
  float voltage = reading * (5.0 / 1023.0);
  
  // Convert to temperature (TMP36 formula)
  float temperatureC = (voltage - 0.5) * 100.0;
  
  // Convert to Fahrenheit
  float temperatureF = (temperatureC * 9.0 / 5.0) + 32.0;
  
  // Display
  Serial.print("Temperature: ");
  Serial.print(temperatureC);
  Serial.print("Â°C (");
  Serial.print(temperatureF);
  Serial.println("Â°F)");
  
  delay(1000);
}
```

### 4.5 Light Sensing with LDR (Photoresistor)

**LDR (Light Dependent Resistor)**:
- Resistance decreases with more light
- Dark: ~1MÎ©, Bright: ~1kÎ©

**Voltage Divider Circuit**:
```
        5V
         â”‚
      [10kÎ©]  Fixed resistor
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€ Arduino A0
         â”‚
       [LDR]   Changes with light
         â”‚
        GND
```

**Code - Auto Night Light**:
```cpp
int ldrPin = A0;
int ledPin = 13;
int threshold = 300;  // Adjust based on ambient light

void setup() {
  pinMode(ledPin, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  int lightLevel = analogRead(ldrPin);
  
  Serial.print("Light Level: ");
  Serial.println(lightLevel);
  
  if (lightLevel < threshold) {
    digitalWrite(ledPin, HIGH);  // Turn on LED when dark
    Serial.println("LED ON - It's dark!");
  } else {
    digitalWrite(ledPin, LOW);   // Turn off LED when bright
    Serial.println("LED OFF - It's bright!");
  }
  
  delay(500);
}
```

### 4.6 Serial Communication - Debugging Your Projects

**Serial Monitor**: Window to see what Arduino is "thinking"

**Common Serial Functions**:
```cpp
Serial.begin(9600);           // Start at 9600 baud
Serial.print("Hello");        // Print without newline
Serial.println("Hello");      // Print with newline
Serial.print(value, DEC);     // Print as decimal
Serial.print(value, HEX);     // Print as hexadecimal
Serial.print(value, BIN);     // Print as binary
Serial.available();           // Check if data received
Serial.read();               // Read incoming byte
```

**Debugging Example**:
```cpp
void loop() {
  int sensor = analogRead(A0);
  
  Serial.print("Time: ");
  Serial.print(millis());       // Time since startup
  Serial.print("ms | Sensor: ");
  Serial.print(sensor);
  Serial.print(" | Voltage: ");
  Serial.print(sensor * 5.0 / 1023.0);
  Serial.println("V");
  
  delay(500);
}

// Output in Serial Monitor:
// Time: 1000ms | Sensor: 512 | Voltage: 2.50V
// Time: 1500ms | Sensor: 523 | Voltage: 2.56V
```

---

## Module 5: Working with Sensors

### 5.1 Ultrasonic Distance Sensor (HC-SR04)

**How It Works**:
1. Send ultrasonic pulse (40 kHz sound wave)
2. Wait for echo to return
3. Measure time taken
4. Calculate distance: Distance = (Time Ã— Speed of Sound) / 2

**Connections**:
```
HC-SR04
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VCC GND  â”‚
â”‚ TRIG ECHOâ”‚
â””â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”˜
   â”‚   â”‚
  Pin7 Pin6
```

**Code**:
```cpp
int trigPin = 7;
int echoPin = 6;
int ledPin = 13;

void setup() {
  pinMode(trigPin, OUTPUT);
  pinMode(echoPin, INPUT);
  pinMode(ledPin, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  // Send trigger pulse
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);
  
  // Measure echo time
  long duration = pulseIn(echoPin, HIGH);
  
  // Calculate distance in cm
  // Speed of sound = 343 m/s = 0.0343 cm/Âµs
  // Distance = (duration * 0.0343) / 2
  float distance = duration * 0.0343 / 2;
  
  Serial.print("Distance: ");
  Serial.print(distance);
  Serial.println(" cm");
  
  // Alert if object too close
  if (distance < 10) {
    digitalWrite(ledPin, HIGH);  // Warning LED
  } else {
    digitalWrite(ledPin, LOW);
  }
  
  delay(100);
}
```

**Applications**:
- Parking sensors
- Collision avoidance robots
- Water level monitoring
- Automatic doors

### 5.2 PIR Motion Sensor

**PIR (Passive Infrared)**:
- Detects infrared radiation from warm bodies
- Digital output: HIGH when motion detected
- Range: 3-7 meters
- Adjustable sensitivity and time delay

**Circuit**:
```
PIR Sensor
â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ VCC  â”‚â”€â”€ 5V
â”‚ OUT  â”‚â”€â”€ Pin 2
â”‚ GND  â”‚â”€â”€ GND
â””â”€â”€â”€â”€â”€â”€â”˜
```

**Code - Motion Activated Light**:
```cpp
int pirPin = 2;
int ledPin = 13;
int pirState = LOW;

void setup() {
  pinMode(pirPin, INPUT);
  pinMode(ledPin, OUTPUT);
  Serial.begin(9600);
  
  // Warm-up time for PIR sensor
  Serial.println("Warming up PIR sensor...");
  delay(2000);
  Serial.println("Ready!");
}

void loop() {
  int motion = digitalRead(pirPin);
  
  if (motion == HIGH) {
    if (pirState == LOW) {
      Serial.println("Motion detected!");
      digitalWrite(ledPin, HIGH);
      pirState = HIGH;
    }
  } else {
    if (pirState == HIGH) {
      Serial.println("Motion ended!");
      digitalWrite(ledPin, LOW);
      pirState = LOW;
    }
  }
}
```

### 5.3 DHT11/DHT22 - Temperature & Humidity

**DHT Sensors**:
- DHT11: Â±2Â°C, Â±5% RH accuracy
- DHT22: Â±0.5Â°C, Â±2% RH accuracy (better)
- Digital output (requires library)

**Installation**:
1. Go to: Sketch â†’ Include Library â†’ Manage Libraries
2. Search: "DHT sensor library"
3. Install "DHT sensor library by Adafruit"
4. Also install "Adafruit Unified Sensor"

**Code**:
```cpp
#include <DHT.h>

#define DHTPIN 2       // Data pin
#define DHTTYPE DHT22  // DHT22 or DHT11

DHT dht(DHTPIN, DHTTYPE);

void setup() {
  Serial.begin(9600);
  dht.begin();
  Serial.println("DHT Sensor Test!");
}

void loop() {
  // Wait between measurements
  delay(2000);
  
  // Read sensor
  float humidity = dht.readHumidity();
  float temperature = dht.readTemperature();  // Celsius
  float fahrenheit = dht.readTemperature(true);  // Fahrenheit
